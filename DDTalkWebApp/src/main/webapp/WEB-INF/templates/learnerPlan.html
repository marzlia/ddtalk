<!DOCTYPE html>
<html>
<head>
    <title>DDTalk</title>
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script src="/resources/js/selectize.js" th:src="@{/resources/js/selectize.js}"></script>

    <link type="text/css" rel="stylesheet" href="/resources/css/main.css" th:href="@{/resources/css/main.css}" />

</head>
<body>

<div th:replace="learnerFragments :: learner_header"></div>

<br /><br /><br />

<table class="table-style-standard">
    <tr>
        <td th:text="${#dates.format(plan.dateStartPlan, 'MMM dd, yyyy')}"></td>
        <td th:text="${plan.treatmentFrequency}"></td>
        <td th:text="${plan.dataCollectFrequency}"></td>
    </tr>
</table>

<br /><br /><br />

<div th:each="mapEntry : ${domainObjectivesMap}">
    <label th:text="${mapEntry.key.description}" class="label-style-domain"></label>
    <div th:each="planObjective : ${mapEntry.value}">
        <table class="table-style-standard">
            <tr>
                <td th:text="${planObjective.objective.description}"></td>
                <td>
                <select>
                    <option th:each="objectiveType : ${objectiveTypes}"
                            th:value="${objectiveType.typeId}"
                            th:text="${objectiveType.typeDescription}"
                            th:selected="${planObjective.objectiveType.typeId == objectiveType.typeId}"/>
                </select>
                </td>
            </tr>
            <tr th:if="${planObjective.objectiveType.typeId == 'C'}">
                <table class="table-style-standard">
                    <tr>
                        <td>
                            <select>
                                <option th:each="masteryCount : ${masteryCounts}"
                                        th:value="${masteryCount}"
                                        th:text="${masteryCount}"/>
                            </select>
                        </td>
                        <td>
                            <select>
                                <option th:each="condition : ${conditions}"
                                        th:value="${condition}"
                                        th:text="${condition.description}"/>
                            </select>
                        </td>
                        <td>
                            <select>
                                <option th:each="criteria : ${criterias}"
                                        th:value="${criteria}"
                                        th:text="${criteria.description}"/>
                            </select>
                        </td>
                    </tr>
                </table>
            </tr>
            <tr th:if="${planObjective.objectiveType.typeId == 'P'}">
                <table class="table-style-standard">
                    <tr>
                        <td>
                            <select>
                                <option th:each="masteryPercent : ${masteryPercents}"
                                        th:value="${masteryPercent}"
                                        th:text="${masteryPercent} + '%'"/>
                            </select>
                        </td>
                        <td>
                            <select>
                                <option th:each="condition : ${conditions}"
                                        th:value="${condition}"
                                        th:text="${condition.description}"/>
                            </select>
                        </td>
                        <td>
                            <select>
                                <option th:each="criteria : ${criterias}"
                                        th:value="${criteria}"
                                        th:text="${criteria.description}"/>
                            </select>
                        </td>
                    </tr>
                </table>
            </tr>
         </table>
        <br />
        <table>
            <tr>
                <td>
                    <select>
                        <option th:each="domainObjective : ${domainObjectives}"
                                th:value="${domainObjective}"
                                th:text="${domainObjective.description}"/>
                    </select>
                </td>
            </tr>
        </table>
    </div>
    <br /><br />
</div>

<div id="wrapper">
    <h1>Selectize.js</h1>
    <div class="demo">
        <h2>API</h2>
        <p>Examples of how to interact with the control programmatically.</p>
        <div class="control-group">
            <label for="select-tools">Tools:</label>
            <select id="select-tools" placeholder="Pick a tool..."></select>
        </div>
        <div class="buttons">
            <input type="button" value="clear()" id="button-clear" />
            <input type="button" value="clearOptions()" id="button-clearoptions" />
            <input type="button" value="addOption()" id="button-addoption" />
            <input type="button" value="addItem()" id="button-additem" />
            <input type="button" value="setValue()" id="button-setvalue" />
        </div>
        <script>
            var $select = $('#select-tools').selectize({
                maxItems: null,
                valueField: 'id',
                labelField: 'title',
                searchField: 'title',
                options: [
                    {id: 1, title: 'Spectrometer', url: 'http://en.wikipedia.org/wiki/Spectrometers'},
                    {id: 2, title: 'Star Chart', url: 'http://en.wikipedia.org/wiki/Star_chart'},
                    {id: 3, title: 'Electrical Tape', url: 'http://en.wikipedia.org/wiki/Electrical_tape'}
                ],
                create: false
            });
            // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
            var control = $select[0].selectize;
            $('#button-clear').on('click', function() {
                control.clear();
            });
            $('#button-clearoptions').on('click', function() {
                control.clearOptions();
            });
            $('#button-addoption').on('click', function() {
                control.addOption({
                    id: 4,
                    title: 'Something New',
                    url: 'http://google.com'
                });
            });
            $('#button-additem').on('click', function() {
                control.addItem(2);
            });
            $('#button-setvalue').on('click', function() {
                control.setValue([2, 3]);
            });
        </script>
    </div>
</div>


<select>
    <option th:each="domain : ${emptyDomains}"
            th:value="${domain}"
            th:text="${domain.description}"/>
</select>
<br />
<input type="button" value="Add selected Domain to plan" class="add_domain_button" />


</body>
</html>